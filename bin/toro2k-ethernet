#!/bin/bash

iface=${BLOCK_INSTANCE}
iface_dir="/sys/class/net/${iface}"


if [ ! -d "$iface_dir" ]; then
    exit 0
fi

if [ "$(cat ${iface_dir}/operstate)" = 'down' ]; then
    exit 0
fi

addr=$(ip addr show ${iface} | awk '/inet / { sub(/\/[0-9]+$/, "", $2); print $2; exit }')
printf '%s %s\n' "$iface" "$addr"

exit 0
